{"ast":null,"code":"import _slicedToArray from \"/home/mistermboy/repositories/shex-author/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/mistermboy/repositories/shex-author/src/App.js\";\nimport React, { useState } from 'react';\nimport { Collapse } from 'reactstrap';\nimport axios from 'axios';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport EditorComp from './components/EditorComp';\nimport AssistantComp from './components/AssistantComp';\nimport VisualizeComp from './components/VisualizeComp';\nimport LateralNav from './components/navComponents/LateralNav';\nimport Nav from './components/navComponents/Nav';\nimport shexUtils from './utils/shexUtils';\nimport Editor from './entities/editor';\nexport const ShapesContext = React.createContext();\n\nfunction App() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        shapes = _useState2[0],\n        setShapes = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        svg = _useState4[0],\n        setSvg = _useState4[1];\n\n  const _useState5 = useState([{\n    key: '',\n    val: 'http://example.org/'\n  }]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        prefixes = _useState6[0],\n        setPrefixes = _useState6[1];\n\n  const _useState7 = useState(true),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isAssistantOpen = _useState8[0],\n        setAssistantOpen = _useState8[1];\n\n  const _useState9 = useState(true),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isVisualizeOpen = _useState10[0],\n        setVisualizeOpen = _useState10[1];\n\n  const _useState11 = useState(true),\n        _useState12 = _slicedToArray(_useState11, 2),\n        isLateralNavOpen = _useState12[0],\n        setLateralNavOpen = _useState12[1];\n\n  const assistantToggle = () => setAssistantOpen(!isAssistantOpen);\n\n  const visualizeToggle = () => setVisualizeOpen(!isVisualizeOpen);\n\n  const lateralNavToggle = () => setLateralNavOpen(!isLateralNavOpen);\n\n  const colapseAll = () => {\n    setAssistantOpen(!isLateralNavOpen);\n    setVisualizeOpen(!isLateralNavOpen);\n    setLateralNavOpen(!isLateralNavOpen);\n  };\n\n  const darkStyle = {\n    background: '#222',\n    color: 'white'\n  };\n  const lightStyle = {\n    background: '#eaf3ff',\n    color: 'black'\n  };\n\n  const _useState13 = useState(lightStyle),\n        _useState14 = _slicedToArray(_useState13, 2),\n        style = _useState14[0],\n        setStyle = _useState14[1];\n\n  let theme = 'light';\n\n  const addShape = () => {\n    setShapes([...shapes, shexUtils.addShape(shapes)]);\n    setTimeout(() => {\n      emit(shapes);\n    }, 1000);\n  };\n\n  const deleteShape = shapeId => {\n    setShapes(shexUtils.deleteShape(shapes, shapeId, false));\n  };\n\n  const emit = () => {\n    shexUtils.emit(shapes);\n    visualize();\n  };\n\n  const replaceShapes = newShapes => {\n    //This allows to render all the shapes when a property is updated.\n    //Best Glitch Ever\n    setShapes([]);\n    setShapes(newShapes);\n    visualize();\n  };\n\n  const updatePrefixes = newPrefixes => {\n    setPrefixes(newPrefixes);\n  };\n\n  const changeThemeStyle = () => {\n    if (theme == 'light') {\n      //I don't know why this doesn't work with style state\n      setStyle(darkStyle);\n      theme = 'dark';\n    } else {\n      theme = 'light';\n      setStyle(lightStyle);\n    }\n  };\n\n  const getSchema = function () {\n    let yashe = Editor.getInstance().getYashe();\n\n    if (yashe) {\n      return yashe.getValue();\n    }\n\n    return '';\n  };\n\n  const visualize = function () {\n    let bodyFormData = new FormData();\n    bodyFormData.set('schema', getSchema());\n    bodyFormData.set('schemaFormat', 'ShExC');\n    bodyFormData.set('schemaEngine', 'SHEX');\n    axios({\n      method: 'post',\n      url: 'http://rdfshape.weso.es:8080/api/schema/visualize',\n      data: bodyFormData,\n      config: {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }\n    }).then(function (response) {\n      //handle success\n      setSvg(response.data.svg);\n    }).catch(function (response) {\n      //handle error\n      console.log(response);\n    });\n  };\n\n  return React.createElement(ShapesContext.Provider, {\n    value: {\n      shapes,\n      shapes,\n      addShape: addShape,\n      deleteShape: deleteShape,\n      replaceShapes: replaceShapes,\n      prefixes: prefixes,\n      updatePrefixes: updatePrefixes,\n      emit: emit,\n      currentStyle: style,\n      changeThemeStyle: changeThemeStyle,\n      visualize: visualize\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    colapseAll: colapseAll,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"row comps\",\n    style: style,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(Collapse, {\n    isOpen: isLateralNavOpen,\n    className: \"lateralNav col-xs-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(LateralNav, {\n    assistantToggle: assistantToggle,\n    visualizeToggle: visualizeToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  })), React.createElement(Collapse, {\n    isOpen: isAssistantOpen,\n    className: \"col\",\n    style: style,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(AssistantComp, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  })), React.createElement(EditorComp, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  })), React.createElement(Collapse, {\n    isOpen: isVisualizeOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(VisualizeComp, {\n    svg: svg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/mistermboy/repositories/shex-author/src/App.js"],"names":["React","useState","Collapse","axios","EditorComp","AssistantComp","VisualizeComp","LateralNav","Nav","shexUtils","Editor","ShapesContext","createContext","App","shapes","setShapes","svg","setSvg","key","val","prefixes","setPrefixes","isAssistantOpen","setAssistantOpen","isVisualizeOpen","setVisualizeOpen","isLateralNavOpen","setLateralNavOpen","assistantToggle","visualizeToggle","lateralNavToggle","colapseAll","darkStyle","background","color","lightStyle","style","setStyle","theme","addShape","setTimeout","emit","deleteShape","shapeId","visualize","replaceShapes","newShapes","updatePrefixes","newPrefixes","changeThemeStyle","getSchema","yashe","getInstance","getYashe","getValue","bodyFormData","FormData","set","method","url","data","config","headers","then","response","catch","console","log","currentStyle"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { Collapse } from 'reactstrap';\nimport axios from 'axios';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport EditorComp from './components/EditorComp';\nimport AssistantComp from './components/AssistantComp';\nimport VisualizeComp from  './components/VisualizeComp';\n\nimport LateralNav from './components/navComponents/LateralNav';\nimport Nav from './components/navComponents/Nav';\n\nimport shexUtils from './utils/shexUtils';\n\nimport Editor from './entities/editor';\n\n\nexport const ShapesContext = React.createContext();\n\nfunction App() {\n\n    const [shapes,setShapes] = useState([]);\n    const [svg,setSvg] = useState('');\n    const [prefixes,setPrefixes] = useState([{key:'',val:'http://example.org/'}]);\n    const [isAssistantOpen, setAssistantOpen] = useState(true);\n    const [isVisualizeOpen, setVisualizeOpen] = useState(true);\n    const [isLateralNavOpen, setLateralNavOpen] = useState(true);\n\n    const assistantToggle = () => setAssistantOpen(!isAssistantOpen); \n    const visualizeToggle = () => setVisualizeOpen(!isVisualizeOpen);\n    const lateralNavToggle = () => setLateralNavOpen(!isLateralNavOpen);\n    const colapseAll = () =>{\n      setAssistantOpen(!isLateralNavOpen);\n      setVisualizeOpen(!isLateralNavOpen);\n      setLateralNavOpen(!isLateralNavOpen);\n    }\n\n\n     const darkStyle = {\n        background: '#222',\n        color:'white'\n    }\n\n    const lightStyle = {\n        background: '#eaf3ff',\n        color:'black'\n    }\n\n    const [style,setStyle] = useState(lightStyle);\n    let theme = 'light';\n\n    const addShape = () =>{\n      setShapes([...shapes,shexUtils.addShape(shapes)]);\n      setTimeout(() => {\n        emit(shapes);\n    }, 1000);\n    }\n\n    const deleteShape = (shapeId) =>{\n      setShapes(shexUtils.deleteShape(shapes,shapeId,false));\n    }\n\n    const emit = ()=>{\n      shexUtils.emit(shapes);\n      visualize();\n    }\n\n    const replaceShapes = (newShapes) =>{\n      //This allows to render all the shapes when a property is updated.\n      //Best Glitch Ever\n      setShapes([]); \n      setShapes(newShapes);\n      visualize();\n    }\n\n    const updatePrefixes = (newPrefixes)=>{\n      setPrefixes(newPrefixes);\n    }\n    \n    const changeThemeStyle = () =>{\n      if(theme=='light'){//I don't know why this doesn't work with style state\n        setStyle(darkStyle);\n        theme='dark';\n      }else{\n        theme='light';\n        setStyle(lightStyle);\n      }\n    }\n\n    const getSchema = function(){\n      let yashe = Editor.getInstance().getYashe();\n      if(yashe){\n          return yashe.getValue();\n      }\n      return '';\n    }\n\n\n    const visualize = function(){\n\n        let bodyFormData = new FormData();\n        bodyFormData.set('schema', getSchema());\n        bodyFormData.set('schemaFormat', 'ShExC');\n        bodyFormData.set('schemaEngine', 'SHEX');\n\n\n        axios({\n            method: 'post',\n            url: 'http://rdfshape.weso.es:8080/api/schema/visualize',\n            data: bodyFormData,\n            config: { headers: {'Content-Type': 'multipart/form-data' }}\n        })\n        .then(function (response) {\n            //handle success\n            setSvg(response.data.svg);\n        })\n        .catch(function (response) {\n            //handle error\n            console.log(response);\n        });\n\n        \n    }\n\n\n    return (\n            \n            <ShapesContext.Provider \n                value={\n                  {\n                    shapes,shapes,\n                    addShape:addShape,\n                    deleteShape:deleteShape,\n                    replaceShapes:replaceShapes,\n                    prefixes:prefixes,\n                    updatePrefixes:updatePrefixes,\n                    emit:emit,\n                    currentStyle:style,\n                    changeThemeStyle:changeThemeStyle,\n                    visualize:visualize\n                  }\n                }>\n                \n                <Nav colapseAll={colapseAll}/>\n              \n                <div className=\"row comps\" style={style}>                  \n                    \n                    <Collapse isOpen={isLateralNavOpen} className=\"lateralNav col-xs-1\">\n                        <LateralNav  assistantToggle={assistantToggle} visualizeToggle={visualizeToggle}/>\n                     </Collapse> \n                    \n\n                    <Collapse isOpen={isAssistantOpen} className=\"col\" style={style}>\n                        <AssistantComp/>\n                     </Collapse> \n                    \n                    <EditorComp />\n                      \n                </div>\n              \n                <Collapse isOpen={isVisualizeOpen} >\n                  <VisualizeComp svg={svg}/>\n                </Collapse>   \n            </ShapesContext.Provider>\n          );\n                       \n           \n  \n    \n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}